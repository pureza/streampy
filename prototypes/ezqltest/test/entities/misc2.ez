temp_readings = stream (:room_id, :temperature);;
entries = stream(:room_id, :product_id);;

entity Room =
  createFrom(temp_readings, :room_id)
  hasMany :products;;


entity Product =
  createFrom (entries, :product_id)
  belongsTo :room;;




//roomsPerProducts = Room.all.select (r -> r.products.select(p -> p.room_id));;

roomsPerProducts = Room.all.select (r -> r.products);;
when (entries, ev -> print (roomsPerProducts));;

#! temp_readings
Timestamp, room_id, temperature
2,               1,      25
6,               2,      50

#! entries
Timestamp, room_id, product_id
4,               1,          2
6,               2,          2
7,               1,          3

